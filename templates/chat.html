<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ©ãƒ³ãƒBot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css') }}">
</head>
<body>
    <div class="chat-container">

        <div class="nav-button-container">
            <a href="/register" class="nav-button">è¡Œã£ãŸãŠåº—ã‚’ç™»éŒ²ã™ã‚‹ âœï¸</a>
        </div>

        <h2>ä»Šæ—¥ã®ãƒ©ãƒ³ãƒã©ã†ã™ã‚‹ï¼ŸğŸš</h2>
        <form method="post" id="lunch-form">
            <input type="text" name="message" placeholder="æµ·é®®ã®æ°—åˆ†ï¼ æšã’ç‰©ãŒè‰¯ã„ï¼ etcâ€¦">
            <button type="submit">ç›¸è«‡ã™ã‚‹</button>
        </form>

        <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
        <div id="loading" class="loading-container">
            <div class="bowl">
                <div class="rice"></div>
                <div class="rice"></div>
                <div class="rice"></div>
            </div>
            <p>ãƒ©ãƒ³ãƒã‚’è€ƒãˆä¸­â€¦</p>
        </div>

        {% if response %}
            <div class="card-container">
                {% for suggestion in response.suggestions %}
                <div class="card">
                    {% if suggestion.photo_url %}
                        <img src="{{ suggestion.photo_url }}" alt="{{ suggestion.shop }}" class="card-image">
                    {% else %}
                        <img src="{{ url_for('static', filename='images/noimage.png') }}" alt="No Image" class="card-image">
                    {% endif %}
                    <div class="card-content">
                        <h3>{{ suggestion.shop }}</h3>
                        <p><strong>æ‰€è¦æ™‚é–“:</strong> {{ suggestion.time }}</p>
                        <p><strong>ãŠã™ã™ã‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼:</strong> {{ suggestion.menu }}</p>
                        <p><strong>å€¤æ®µ:</strong> {{ suggestion.price }}</p>
                        <p><a href="{{ suggestion.link }}" target="_blank">æƒ…å ±æºãƒªãƒ³ã‚¯</a></p>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>

    <script>
        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡¨ç¤º
        document.getElementById("lunch-form").addEventListener("submit", function() {
            document.getElementById("loading").style.display = "block";
        });
    </script>
</body>
</html>
